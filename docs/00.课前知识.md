# 课程名称：软件工程{初级|综合|中级|高级}实践

## 做作业 vs 做工程

### 举例：实现一个除法

- 基本要求：输入二个数字，输出第一个数字除以第二个数字的结果。

#### 如果是做作业

- Python版

```python
a = float(input())
b = float(input())
c = a / b
print(c)
```

- C版

```c
#include <stdio.h>

int main()
{
    double a,b,c;

    scanf("%lf",&a);
    scanf("%lf",&b);
    c = a / b;
    printf("%lf\n",c);

    return 0;
}

```

- C++版

```c++
#include <iostream>

int main()
{
    double a,b,c;
    std::cin >> a >> b;
    c = a / b;
    std::cout << c << std::endl;

    return 0;
}
```

- Java版

```java
import java.util.Scanner;

public class Main
{
	public static void main(String[] args) {
        double a,b,c;
        Scanner sc = new Scanner(System.in);
        a = sc.nextDouble();
        b = sc.nextDouble();
        c = a / b;
		System.out.println(c);
	}
}

```

- 如果这是作业，那么都可以给100分。但是如果这是一个软件工程项目的需求，那么最多也就是给20分。

#### 如果是做工程，那么还要考虑以下问题

- 需求不明。第一个数除以第二个数，除不尽怎么办。比如10除以3，结果是3.33333333……还是商3余1 ？
- 算法不明。如果除不尽，要的又是商和余，那么如果二个数中有负数怎么处理？比如-10除以3，是商-3余-1（C/C++/Java采用商截断法，当商为-3.3333时截断为-3），还是商-4余2（Python采用商取地板数法，即商-3.3333向下取整为-4）。
- 输入不明。输入二个数字，是整数？实数？复数？几进制数？上述的解法显然是处理实数的。
  - 如果是整数，就有以下问题：除不尽怎么办？数字过大怎么办（32bits？64bits？4000位？）
  - 如果是实数，就有以下问题：除不尽怎么办（都实数了一般除不尽就除不尽了吧？）？数字绝对值过大或者过小怎么办（double的表数范围 $-1.7 \times 10^{-308}$ ~ $1.7 \times 10^{308}$ ）? 有效位数过多怎么办（double的精度为15~16位）
  - 如果是复数怎么办？
  - 如果是16进制数怎么办？
- 输入异常。
  - 第二个数字输入为0怎么办？
  - 用户输入 hello 和 world 怎么办？
  - 用户输入 dead 和 beef 怎么办？（这个死牛肉与 hello world 有什么不一样？因为 0xDEAD 和 0xBEEF 真的是数字啊！）
- 恶意攻击。
  - 用户把整部36本《金庸全集》输入进来怎么办？缓冲区溢出攻击了解一下。
- 其他问题。
  - 项目怎么部署？目标代码跨平台吗？不同平台能编译成功吗？不同编译器编译出来一致吗？
  - 用户不会安装怎么办？
  - 用户不会输入怎么办？（用习惯手机和平板了，不会用键盘鼠标）
  - 用户看不懂输出怎么办？
  - 用户输入了第一个数字后，电脑没电了，重启以后能保留输入的第一个数字继续输入第二个数字吗？实时保存了解一下。
  - 用户输入了第一个数字后，下班时间到了，能回家用另一台电脑输入第二个数字吗？云服务了解一下。
  - 怎么知道这个用户是合法的用户？不是未付费的用户，不是黑客。
  - 怎么基于提供的服务向用户收费？
  - 用户不按时缴费怎么办？要不要给程序里放上木马，不缴费就发作？
  - 程序被盗版了怎么办？怎么防止盗版？
  - 程序做完了，老板卸磨杀驴，把程序员开除，程序员怎么办？要不要做个木马，到时候删库再跑路？
  - 程序做完了，程序员借机要挟老板涨薪否则删库跑路，老板怎么办？有没有新程序员接手？文档全不全？Bug有多少？
  - 用户使用很满意，随口提出了需要在安卓/苹果/鸿蒙平台上提供APP版和微信/支付宝中提供小程序版的需求。并且要求同一个用户在不同平台上可以查看各个平台上使用的历史记录。
  - 用户使用很满意，随口提出了协同工作的需求，二个员工可以一个人输入第一个数字，另一个人输入第二个数字，那协同工作需要交流吧，是不是得做的类似微信的聊天工具？功能也不用太多，跟免费的微信一样就行了？这个不难吧，人家微信都是免费的，你这个程序还是收费的呢。
  - 用户使用很满意，就产生了用这个程序挣钱的需求。程序上可以投放广告吧。程序上可以内嵌小游戏吸引客流吧。程序上可以内嵌一个外卖平台增加用户粘性吧。程序上可以增加一个地图定位功能，吸引年青人在上面用“附近的人”功能，增加社交属性吧？什么，这些太难了？这些都是免费的好吧，你不就是拷贝粘贴一下嘛。

## 软件工程项目的特点

### 协作

- 作业可以独立完成，但是软件工程项目必须要协作。

- 众所周知，软件项目，不是人越多越好。二个定理：孕妇定理、和尚定理。

#### 孕妇定理

- 一个孕妇生一个孩子需要10个月，如果为了加快生孩子的过程，让10个孕妇在一个月里就把孩子生出来，是不可行的。见《人月神话》。

- 人月这个词组是一个考察工作量的度量单位，一个人月也就是一个人在一个月能够完成的工作量。在软件工程里，经常用多少个人月来估算项目的工作量。《人月神话》的作者用了一个孕妇生孩子的案例说明了人月这个单位混淆了工作量和进度这两个概念。

- 很多软件项目管理人员总是希望通过加入更多人手来加快软件工程的完成进度。然而实际情况并非如此，因为软件工程的各项工作之间往往有一个前后沉积的关系，得完成一项，才能进行另一项，加进来的人手并不能马上就开展后面的工作，所以想要通过增加人手来缩短工作时间其实只是一个神话。人月神话所反映出的是软件开发在项目管理中遇到的难题。管理人员因为盲目乐观，对项目开发中的困难没有充分认识，在计算工作的工作量和交互时间上，采用了错误的计算方法，忽略了细节对整体的巨大影响，这就很可能导致项目延期。

- 比如说很多工作路径上的事情是无法分解的，往往只能一个人完成，即使有些工作可以拆解，但是一个人做事情和很多人做事情的模式是不一样的。一个人工作时需要的沟通很少，想怎么做就怎么做。但是人一多，就需要持续的沟通交流，需要了解彼此的工作习惯和工作内容，然后这些人才能团结协作，完成同一个目标。这就是需要花费很多时间去开会和交流。

- 归根结底，软件行业是一个知识密集型的行业，团队中人员数量很多，角色也很多。这些角色使用的语言和思维方式都是不一样的，要让这样一群人形成有战斗力的团队，流畅的沟通是必须的。而要达到流畅的沟通，一段时间的磨合期是必须的。

#### 和尚定理

- 一个和尚有水喝，二个和尚担水喝，三个和尚没水喝。

- 这是一段寓言，其寓意是：办一件事，如果没制度作保证，责任不落实，人多反而办不成事。三个和尚为什么没水喝? 因为三个和尚属同一种心态，同一种思想境界，都不想出力，想依赖别人，在取水的问题上互相推诿。结果谁也不去取水，以致大家都没水喝。其实，三个和尚也可有水喝，只要稍加组织，订立轮流取水的制度，责任落实到人，违者重罚，这样就有水喝了。

#### 那为什么软件项目必须要协作？

- 消除单点风险。如果一个软件项目全部依赖一个程序员的工作，那么这个程序员离职或者出了意外，这个项目可能就完了。例：ReiserFS 文件系统由于其创始人 Hans Reiser 的谋杀罪名成立，项目开发停滞，最终被从 Linux 内核中移除。
- 个人英雄主义的程序员，往往把想法放在自己的脑子里，最终产生的只有非常高级但是别人谁也读不懂的代码。团队协作开发，虽然大量的时间花在讨论（扯皮）和写文档上，但是留下的文档和讨论的会议记录，为后人加入项目带来可能性，而且团队开发的代码往往也更规范（木桶原理，木桶装水的多少取决于最短的那条木板。代码可读性取决于团队中水平最差的程序员也可以读懂可以参与开发）。

### 变化

- 用户（甲方）的需求是永远在变化的。永远！
  - 我也不知道想要什么，你先做几个方案我看看。看完了再改。反正你们就是动动键盘嘛，又不费事。
  - 第一周开会，A领导：背景要黄色；第二周开会，B领导（与A领导不对付）：背景要绿色；第三周开会前，我：要不我加个登录吧，来不同领导，登录不同的帐号，看到的背景不同。
  - HR：这个财务系统要改一下，系统中只能显示工人的一半工资。我：啥？。HR：我们给工人发工资，一半发银行卡里，银行卡是交给老婆的，另一半发现金，现金是工人的私房钱，这个系统回家让老婆一查不就露馅了。我：啊？

- 技术是不断发展变化的。去年的项目用的技术，今年就得升级，要不然总出错。

- 程序员的水平是在不变提高的。三个月前开发的程序，现在看起来就是一坨X，别人留下来的程序，看起来就是一坨X。怎么办？重构。