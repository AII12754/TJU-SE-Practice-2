# SpringBoot接收参数的方式


使用Spring Boot开发API的时候，读取请求参数是服务端编码中最基本的一项操作，Spring Boot中也提供了多种机制来满足不同的API设计要求。

- Spring Boot中的 6 种 API 请求参数读取方式
    - @RequestParam
    - @PathVariable
    - @MatrixVariable
    - @RequestBody
    - @RequestHeader
    - @CookieValue

HTTP请求中不同的请求方式和设置不同的Content-Type时，参数传递的方式会不一样，包括以下三种形式：Query String Parameters、Form Data、Request Payload；

- 以下示例，Base URL 为 http://localhost:8080/api 

- 先设计一个 model 类 User

```java
class User{
    private Long id;
    private String name;
    // getter and setter
}
```

- Controller 的总体框架如下

```java
package com.example.demo;

import jakarta.servlet.http.HttpServletRequest;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api")
public class DemoController {
    ......
}
```

## Query String Parameters

- GET请求时，参数会以url string 的形式进行传递，即?后的字符串则为其请求参数，并以&作为分隔符。

- 例如：http://localhost:8080/api/test1?name=tju&id=1

### 原生的HttpServletRequest接收

```java
    // http://localhost:8080/api/test1?name=tju&id=1
    @RequestMapping("/test1")
    public User test1(HttpServletRequest request){
        System.out.println("test1: " + request.getParameter("name"));
        return new User(Long.parseLong(request.getParameter("id"))+1,request.getParameter("name").toUpperCase());
    }

```

###  直接把请求参数写在方法的形参中

```java
    // http://localhost:8080/api/test2?name=tju&id=1
    @RequestMapping("/test2")
    public User test2(String name, Long id){
        System.out.println("test2: " + name);
        return new User(id+1,name.toUpperCase());
    }
```

### @RequestParam 绑定请求参数到方法形参

```java
    // http://localhost:8080/api/test3?name=tju&id=1
    @RequestMapping("/test3")
    public User test3(@RequestParam("name") String name,@RequestParam("id") Long id){
        System.out.println("test3: " + name);
        return new User(id+1,name.toUpperCase());
    }
```

### 封装一个bean直接来接收
> http://localhost:8080/api/test4?name=tju&id=1

```java    
    @RequestMapping("/test4")
    public User test4(User user){
        System.out.println("test4: " + user.getName());
        return user;
    }
```

-  实体类嵌套示例
> http://localhost:8080/api/test4?id=111&name=tju&address.detail=sunac
```java
class User{
    private Long id;
    private String name;
    private Address address;
    // getter and setter
}
class Address {
    private String country;
    private String province;
    private String city;
    private String street;
    private String detail;
    // getter and setter
}
```
```java
    @RequestMapping("/test4")
    public User test4(User user){
        System.out.println("test4: " + user.getName());
        return user;
    }
```

## Form Data

- 当发起一次 Post 请求，若未指定 Content-type，则默认 content-type 为 application/x-www-form-urlencoded ，即参数会以 FormData 的形式进行传递，不会显示出现在请求URL中。
- form-data的请求是在body中，为key=value格式，同时可以传文件，Content-Type 为 multipart/form-data ，后端可以用 @RequestParam 接收。
- 后端 SpringBoot 接收时，与处理 GET 请求的 Query String Parameters 相同，不再重复演示。


## Request Payload

- 当发起一次 post 请求，若 Content-Type 为 application/json ，则参数会以 Request Payload 的形式进行传递（数据格式为json）,不会显示出现在请求url中。
- json传参也是在body当中，只不过json是一种数据格式，后端可以用@RequestBody接收。

```java
    // @RequestBody绑定请求参数到方法形参
    // 参数必须Json字符串
    // Body只能有一个
    @RequestMapping("/test5")
    public User test5(@RequestBody User user){
        System.out.println("test5: " + user.getName());
        return new User(user.getId()+1,user.getName().toUpperCase());
    }
```

## @PathVariable获取rest风格路径参数

```java
    // http://localhost:8080/api/test6/1/tju
    @RequestMapping("/test6/{id}/{name}")
    public User test6(@PathVariable long id, @PathVariable String name){
        System.out.println("test6: " + name);
        return new User(id+1,name.toUpperCase());
    }
```

- [SpringBoot接收参数的8种方式](https://blog.csdn.net/qq_44627608/article/details/132425435)
- [SpringBoot接收参数的几种形式](https://blog.csdn.net/long1_1/article/details/136381048)
- [Spring Boot中接收请求参数的多种方式及前端请求示例](https://cloud.tencent.com/developer/article/2453290)
- [SpringBoot接收参数的几种常用方式](https://juejin.cn/post/7280746515517210665)
- [SpringBoot接收参数的19种方式](https://zhuanlan.zhihu.com/p/695869318)
- [Spring Boot中的 6 种API请求参数读取方式](https://zhuanlan.zhihu.com/p/1922054530805243906)